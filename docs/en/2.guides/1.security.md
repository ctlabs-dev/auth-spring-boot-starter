---
title: Security Guide
description: Security best practices, role management, and integration patterns.
navigation.icon: uil:shield
---

## Architecture

The starter configures a `SecurityFilterChain` with `@Order(1)`. This ensures it takes precedence over your application's security configuration, but **only** for the routes defined in `ctlabs.auth.base-url`.

## Protecting Your Endpoints

In your main application, configure security as usual. The starter does not interfere with your other routes.

```java
@RestController
@RequestMapping("/api/products")
public class ProductController {

    @GetMapping
    @PreAuthorize("hasRole('CUSTOMER')")
    public List<Product> getAll() {
        // ...
    }
}
```

## Role Management

For security reasons, the starter does not expose a public endpoint to change user roles. You must implement this in your application using the provided `AuthService`.

```java
@PostMapping("/promote")
public ResponseEntity<?> promote(@RequestBody PromoteRequest req) {
    return ResponseEntity.ok(
        authService.updateRole(req.email(), "ROLE_ADMIN")
    );
}
```