---
title: Guía de Seguridad
description: Mejores prácticas de seguridad, gestión de roles y patrones de integración.
navigation.icon: uil:shield
---

## Arquitectura

El starter configura un `SecurityFilterChain` con `@Order(1)`. Esto asegura que tenga precedencia sobre la configuración de seguridad de tu aplicación, pero **solo** para las rutas definidas en `ctlabs.auth.base-url`.

## Protegiendo Tus Endpoints

En tu aplicación principal, configura la seguridad como de costumbre. El starter no interfiere con tus otras rutas.

```java
@RestController
@RequestMapping("/api/products")
public class ProductController {

    @GetMapping
    @PreAuthorize("hasRole('CUSTOMER')")
    public List<Product> getAll() {
        // ...
    }
}
```

## Gestión de Roles

Por razones de seguridad, el starter no expone un endpoint público para cambiar roles de usuario. Debes implementar esto en tu aplicación usando el `AuthService` proporcionado.

```java
@PostMapping("/promote")
public ResponseEntity<?> promote(@RequestBody PromoteRequest req) {
    return ResponseEntity.ok(
        authService.updateRole(req.email(), "ROLE_ADMIN")
    );
}
```